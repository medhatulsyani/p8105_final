<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exploratory Overview</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="project_proposal.html">Proposal</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data exploratory &amp; analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="exploratory-datasets.html">Exploratory overview</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="https://github.com/medhatulsyani/p8105_final">GitHub</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore"><strong>Exploratory Overview</strong></h1>

</div>


<p>This page provides an exploratory summary of three datasets used in
this project:</p>
<ol style="list-style-type: decimal">
<li>NYC Leading Causes of Death in 2021</li>
<li>Automated Traffic Volume Counts (2019â€“2024)</li>
<li>NYC Automated External Defibrillator (AED) Inventory</li>
</ol>
<p>These summaries help us understand patterns of mortality burden,
congestion levels, and AED accessibility across boroughs, and they
motivate our later analysis linking traffic conditions to emergency
response readiness.</p>
<div id="leading-causes-of-death" class="section level3">
<h3><img src="icons/heart-disease.png" width="40" style="vertical-align:-10px;">
<strong>Leading causes of death</strong></h3>
<p><em>Table 1</em> shows that in 2021, diseases of the heart caused the
highest number of deaths in NYC (more than 16,500). This is much higher
than any other cause. <em>Figure 1</em> shows this visually: the bar for
heart disease is the longest. Because heart problems can lead to sudden
cardiac arrest, this information supports why studying AED access is
important. Quick defibrillation can save lives, so understanding AED
availability in each borough matters.</p>
<pre class="r"><code>leading_clean2 = leading_clean |&gt;
  mutate(
    cause_name = str_replace(leading_cause, &quot; \\(.*\\)$&quot;, &quot;&quot;)
  )

death_baseline = leading_clean2 |&gt;
  filter(year == 2021) |&gt;
  group_by(cause_name) |&gt;
  summarise(
    total_deaths = sum(deaths, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  arrange(desc(total_deaths))

death_baseline_display = death_baseline |&gt;
  mutate(
    total_deaths = format(total_deaths, big.mark = &quot;,&quot;, scientific = FALSE)
  ) |&gt;
  rename(
    `Cause of death`       = cause_name,
    `Total deaths (2021)`  = total_deaths
  )

death_baseline_display |&gt;
  kable(
    caption = &quot;Table 1. Leading causes of death in NYC, 2021&quot;,
    format = &quot;html&quot;
  ) |&gt;
  kable_styling(
    full_width = FALSE,
    bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;bordered&quot;)
  )</code></pre>
<table class="table table-striped table-hover table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 1. Leading causes of death in NYC, 2021
</caption>
<thead>
<tr>
<th style="text-align:left;">
Cause of death
</th>
<th style="text-align:left;">
Total deaths (2021)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Diseases of Heart
</td>
<td style="text-align:left;">
16,568
</td>
</tr>
<tr>
<td style="text-align:left;">
All Other Causes
</td>
<td style="text-align:left;">
14,240
</td>
</tr>
<tr>
<td style="text-align:left;">
Malignant Neoplasms
</td>
<td style="text-align:left;">
11,578
</td>
</tr>
<tr>
<td style="text-align:left;">
Covid-19
</td>
<td style="text-align:left;">
8,229
</td>
</tr>
<tr>
<td style="text-align:left;">
Mental and Behavioral Disorders due to Accidental Poisoning and Other
Psychoactive Substance Use
</td>
<td style="text-align:left;">
2,692
</td>
</tr>
<tr>
<td style="text-align:left;">
Cerebrovascular Disease
</td>
<td style="text-align:left;">
2,149
</td>
</tr>
<tr>
<td style="text-align:left;">
Influenza
</td>
<td style="text-align:left;">
1,628
</td>
</tr>
<tr>
<td style="text-align:left;">
Diabetes Mellitus
</td>
<td style="text-align:left;">
1,535
</td>
</tr>
<tr>
<td style="text-align:left;">
Chronic Lower Respiratory Diseases
</td>
<td style="text-align:left;">
1,212
</td>
</tr>
<tr>
<td style="text-align:left;">
Essential Hypertension and Renal Diseases
</td>
<td style="text-align:left;">
1,150
</td>
</tr>
<tr>
<td style="text-align:left;">
Accidents Except Drug Poisoning
</td>
<td style="text-align:left;">
1,112
</td>
</tr>
<tr>
<td style="text-align:left;">
Alzheimerâ€™s Disease
</td>
<td style="text-align:left;">
822
</td>
</tr>
<tr>
<td style="text-align:left;">
Assault
</td>
<td style="text-align:left;">
291
</td>
</tr>
<tr>
<td style="text-align:left;">
Chronic Liver Disease and Cirrhosis
</td>
<td style="text-align:left;">
188
</td>
</tr>
<tr>
<td style="text-align:left;">
Intentional Self-Harm
</td>
<td style="text-align:left;">
79
</td>
</tr>
<tr>
<td style="text-align:left;">
Chronic Liver Diseases and Cirrhosis
</td>
<td style="text-align:left;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
Septicemia
</td>
<td style="text-align:left;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
Mental and Behavioral Disorders due to Use of Alcohol
</td>
<td style="text-align:left;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
Certain Conditions Originating in the Perinatal Period
</td>
<td style="text-align:left;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
Human Immunodeficiency Viruses Diseases
</td>
<td style="text-align:left;">
7
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>death_baseline |&gt;
  slice_max(order_by = total_deaths, n = 10) |&gt;
  ggplot(aes(
    x    = reorder(cause_name, total_deaths),
    y    = total_deaths,
    fill = total_deaths          # map fill to deaths
  )) +
  geom_col() +
  coord_flip() +
  theme_minimal() +
  scale_x_discrete(labels = ~ str_wrap(., width = 35)) +  # wrap labels
  scale_fill_gradient(low = &quot;#fee0d2&quot;, high = &quot;#de2d26&quot;) +
  guides(fill = &quot;none&quot;) +
  labs(
    title = &quot;Figure 1: Top 10 causes of death in NYC, 2021&quot;,
    x     = &quot;Cause of death&quot;,
    y     = &quot;Total deaths&quot;
  )</code></pre>
<p><img src="Exploratory-datasets_files/figure-html/leading_bar-1.png" width="672" /></p>
</div>
<div id="traffic-volume-summary" class="section level3">
<h3><img src="icons/warning.png" width="40" style="vertical-align:-10px;">
<strong>Traffic volume summary</strong></h3>
<p><em>Table 2</em> summarizes traffic measurements for each borough.
Queens and Brooklyn have the most measurements and the most monitored
street segments. Manhattan has the highest mean and median traffic
volume, which matches what we expect for a busy business and tourist
area.</p>
<pre class="r"><code>traffic_summary = traffic_clean |&gt;
  group_by(boro) |&gt;
  summarise(
    n_measurements = n(),
    unique_segments = n_distinct(segment_id),
    mean_volume = mean(vol, na.rm = TRUE),
    median_volume = median(vol, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  rename(borough = boro)

traffic_summary_display = traffic_summary |&gt;
  rename(
    Borough = borough,
    `Number of measurements`     = n_measurements,
    `Number of monitored segments` = unique_segments,
    `Mean traffic volume`        = mean_volume,
    `Median traffic volume`      = median_volume
  )

traffic_summary_display |&gt;
  kable(
    caption     = &quot;Table 2: Traffic volume summary by borough, 2019â€“2024&quot;,
    format      = &quot;html&quot;,
    digits      = 2,
    format.args = list(big.mark = &quot;,&quot;)   # add commas to all numeric cols
  ) |&gt;
  kable_styling(
    full_width = FALSE,
    bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;bordered&quot;)
  )</code></pre>
<table class="table table-striped table-hover table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 2: Traffic volume summary by borough, 2019â€“2024
</caption>
<thead>
<tr>
<th style="text-align:left;">
Borough
</th>
<th style="text-align:right;">
Number of measurements
</th>
<th style="text-align:right;">
Number of monitored segments
</th>
<th style="text-align:right;">
Mean traffic volume
</th>
<th style="text-align:right;">
Median traffic volume
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Bronx
</td>
<td style="text-align:right;">
64,572
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
86.53
</td>
<td style="text-align:right;">
55
</td>
</tr>
<tr>
<td style="text-align:left;">
Brooklyn
</td>
<td style="text-align:right;">
160,661
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:right;">
122.67
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:left;">
Manhattan
</td>
<td style="text-align:right;">
88,011
</td>
<td style="text-align:right;">
115
</td>
<td style="text-align:right;">
147.60
</td>
<td style="text-align:right;">
93
</td>
</tr>
<tr>
<td style="text-align:left;">
Queens
</td>
<td style="text-align:right;">
162,987
</td>
<td style="text-align:right;">
186
</td>
<td style="text-align:right;">
117.75
</td>
<td style="text-align:right;">
57
</td>
</tr>
<tr>
<td style="text-align:left;">
Staten Island
</td>
<td style="text-align:right;">
24,494
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
108.96
</td>
<td style="text-align:right;">
67
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>traffic_clean |&gt;
  ggplot(aes(x = vol)) +
  geom_histogram(
    bins  = 60,
    fill  = &quot;#3182bd&quot;,   # bar color
    color = &quot;white&quot;      # bar border
  ) +
  coord_cartesian(xlim = c(0, 400)) +
  theme_minimal() +
  labs(
    title = &quot;Figure 3: Distribution of traffic volume (0â€“400, all boroughs, 2019â€“2024)&quot;,
    x     = &quot;Traffic volume&quot;,
    y     = &quot;Count&quot;
  )</code></pre>
<p><img src="Exploratory-datasets_files/figure-html/traffic_vol_hist-1.png" width="672" /></p>
<p><em>Figure 3</em> shows the distribution of traffic volume for all
boroughs from 2019 to 2024. The shape of the distribution is
right-skewed. Most traffic counts are below 100 vehicles, which we can
consider low or medium traffic. Fewer observations fall between 100 and
200 vehicles, and only a small number go above 200, which we consider
very high traffic.</p>
<p>This means that while many streets are not very busy, some specific
areas experience heavy congestion. These high-traffic areas are more
likely to delay emergency vehicles, such as ambulances, from reaching
patients on time.</p>
<pre class="r"><code>traffic_clean |&gt;
  ggplot(aes(x = boro, y = vol, fill = boro)) +
  geom_boxplot(outlier.shape = NA, alpha = 0.8) +
  coord_cartesian(ylim = c(0, 400)) +
  theme_minimal() +
  labs(
    title = &quot;Figure 4: Traffic volume by borough, 2019â€“2024 (0â€“400)&quot;,
    x     = &quot;Borough&quot;,
    y     = &quot;Traffic volume&quot;,
    fill  = &quot;Borough&quot;
  ) +
  theme(
    legend.position = &quot;bottom&quot;
  )</code></pre>
<p><img src="Exploratory-datasets_files/figure-html/trafficbox-1.png" width="672" /></p>
<p>In <em>Figure 4</em>, Manhattanâ€™s boxplot shows the highest median
traffic and the widest spread, meaning traffic levels vary a lot across
locations. Queens and Brooklyn show medium levels, while the Bronx and
Staten Island have lower and more stable traffic. These differences show
how each borough has its own traffic profile, which can affect how
quickly emergency services can reach someone.</p>
<pre class="r"><code>traffic_trend = traffic_clean |&gt;
  group_by(yr, boro) |&gt;
  summarise(
    mean_volume = mean(vol, na.rm = TRUE),
    .groups = &quot;drop&quot;
  )

ggplot(traffic_trend, aes(x = yr, y = mean_volume, color = boro, group = boro)) +
  geom_line(size = 1.2) +
  geom_point(size = 2) +
  theme_minimal() +
  labs(
    title = &quot;Figure 5: Mean traffic volume trend by borough (2019â€“2024)&quot;,
    x     = &quot;Year&quot;,
    y     = &quot;Mean traffic volume&quot;,
    color = &quot;Borough&quot;
  )</code></pre>
<p><img src="Exploratory-datasets_files/figure-html/traffictrend_covid-1.png" width="672" /></p>
<p><em>Figure 5</em> shows how traffic changed from 2019 to 2024. All
boroughs show a drop in 2020 because of the COVID-19 shutdown. After
that, traffic increases again but follows different patterns:</p>
<ul>
<li>Manhattan always has the highest levels and the biggest changes from
year to year.</li>
<li>Queens and Brooklyn increase in some years, especially around
2023.</li>
<li>The Bronx remains more stable with lower overall traffic.</li>
<li>Staten Island saw a substantial increase in 2022, followed by a
significant drop, which could be due to fewer monitored locations.</li>
</ul>
<p>These trends help us understand how changes in traffic over time
might affect AED use or emergency response.</p>
</div>
<div id="aed-summary" class="section level3">
<h3><img src="icons/aed.png" width="40" style="vertical-align:-10px;">
<strong>AED summary</strong></h3>
<pre class="r"><code>aed_summary = aed_clean |&gt;
  group_by(borough) |&gt;
  summarise(
    n_facilities        = n(),                               # number of AED-equipped locations
    mean_aeds_per_site  = mean(aed_num_aeds, na.rm = TRUE),
    mean_trained_people = mean(aed_num_person_trained, na.rm = TRUE),
    .groups = &quot;drop&quot;
  )

aed_summary_display = aed_summary |&gt;
  rename(
    Borough                        = borough,
    `Number of AED-equipped sites` = n_facilities,
    `Mean AEDs per site`           = mean_aeds_per_site,
    `Mean trained people per site` = mean_trained_people
  )

aed_summary_display |&gt;
  kable(
    caption = &quot;Table 3: AED-equipped facilities and trained personnel by borough&quot;,
    format  = &quot;html&quot;
  ) |&gt;
  kable_styling(
    full_width = FALSE,
    bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;bordered&quot;)
  )</code></pre>
<table class="table table-striped table-hover table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 3: AED-equipped facilities and trained personnel by borough
</caption>
<thead>
<tr>
<th style="text-align:left;">
Borough
</th>
<th style="text-align:right;">
Number of AED-equipped sites
</th>
<th style="text-align:right;">
Mean AEDs per site
</th>
<th style="text-align:right;">
Mean trained people per site
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Bronx
</td>
<td style="text-align:right;">
988
</td>
<td style="text-align:right;">
1.042510
</td>
<td style="text-align:right;">
9.966599
</td>
</tr>
<tr>
<td style="text-align:left;">
Brooklyn
</td>
<td style="text-align:right;">
1411
</td>
<td style="text-align:right;">
1.102764
</td>
<td style="text-align:right;">
10.819149
</td>
</tr>
<tr>
<td style="text-align:left;">
Manhattan
</td>
<td style="text-align:right;">
3667
</td>
<td style="text-align:right;">
1.795200
</td>
<td style="text-align:right;">
17.464773
</td>
</tr>
<tr>
<td style="text-align:left;">
Queens
</td>
<td style="text-align:right;">
1228
</td>
<td style="text-align:right;">
1.478013
</td>
<td style="text-align:right;">
17.363115
</td>
</tr>
<tr>
<td style="text-align:left;">
Staten Island
</td>
<td style="text-align:right;">
345
</td>
<td style="text-align:right;">
1.228986
</td>
<td style="text-align:right;">
16.597101
</td>
</tr>
</tbody>
</table>
<div class="plotly html-widget html-fill-item" id="htmlwidget-9ae63c1690c369370d5e" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-9ae63c1690c369370d5e">{"x":{"visdat":{"6be022b422c":["function () ","plotlyVisDat"]},"cur_data":"6be022b422c","attrs":{"6be022b422c":{"labels":{},"values":{},"textinfo":"label+percent","hoverinfo":"label+value+percent","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Figure 6: Distribution of AED-equipped sites by borough","legend":{"orientation":"h","x":0.5,"xanchor":"center","y":-0.10000000000000001},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"values":[988,1411,3667,1228,345],"textinfo":"label+percent","hoverinfo":["label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent"],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><em>Table 3</em> shows that AED availability is not equal across
boroughs. Manhattan has the most AED sites (more than 3,600 locations).
Queens and Brooklyn have moderate coverage, but the Bronx and Staten
Island have the fewest AED sites. <em>Figure 6</em>, the pie chart,
makes these differences easy to see. Manhattan takes up the largest
share of AED locations.</p>
<p>These differences suggest that some boroughs may have better access
to life-saving devices than others. This matters because quick access to
an AED is critical during a cardiac emergency, where every minute
affects survival.</p>
<pre class="r"><code>## Borough-level traffic summary
traffic_summary = traffic_clean |&gt;
  group_by(boro) |&gt;
  summarise(
    n_measurements   = n(),
    unique_segments  = n_distinct(segment_id),
    mean_volume      = mean(vol, na.rm = TRUE),
    median_volume    = median(vol, na.rm = TRUE),
    total_volume     = sum(vol, na.rm = TRUE),   # fine to keep for descriptive
    .groups = &quot;drop&quot;
  ) |&gt;
  rename(borough = boro)

## Borough-level AED summary
aed_summary = aed_clean |&gt;
  group_by(borough) |&gt;
  summarise(
    n_facilities        = n(),
    mean_aeds_per_site  = mean(aed_num_aeds, na.rm = TRUE),
    mean_trained_people = mean(aed_num_person_trained, na.rm = TRUE),
    .groups = &quot;drop&quot;
  )

## ðŸ”— Merge traffic + AED summaries (descriptive only)
borough_summary = traffic_summary |&gt;
  full_join(aed_summary, by = &quot;borough&quot;)

## Table: combined summary (raw counts)
borough_summary_display = borough_summary |&gt;
  transmute(
    Borough                            = borough,
    `Number of traffic measurements`   = n_measurements,
    `Number of monitored segments`     = unique_segments,
    `Total traffic volume (2019â€“2024)` = total_volume,
    `Number of AED-equipped sites`     = n_facilities,
    `Mean AEDs per site`               = mean_aeds_per_site,
    `Mean trained people per site`     = mean_trained_people
  )

borough_summary_display |&gt;
  kable(
    caption     = &quot;Table X. Combined traffic and AED summary by borough&quot;,
    format      = &quot;html&quot;,
    digits      = c(0, 0, 0, 0, 2, 2),
    format.args = list(big.mark = &quot;,&quot;)
  ) |&gt;
  kable_styling(
    full_width        = FALSE,
    bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;bordered&quot;)
  )</code></pre>
<table class="table table-striped table-hover table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table X. Combined traffic and AED summary by borough
</caption>
<thead>
<tr>
<th style="text-align:left;">
Borough
</th>
<th style="text-align:right;">
Number of traffic measurements
</th>
<th style="text-align:right;">
Number of monitored segments
</th>
<th style="text-align:right;">
Total traffic volume (2019â€“2024)
</th>
<th style="text-align:right;">
Number of AED-equipped sites
</th>
<th style="text-align:right;">
Mean AEDs per site
</th>
<th style="text-align:right;">
Mean trained people per site
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Bronx
</td>
<td style="text-align:right;">
64,572
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
5,587,491
</td>
<td style="text-align:right;">
988
</td>
<td style="text-align:right;">
1.04
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
Brooklyn
</td>
<td style="text-align:right;">
160,661
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:right;">
19,709,072
</td>
<td style="text-align:right;">
1,411
</td>
<td style="text-align:right;">
1.10
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
Manhattan
</td>
<td style="text-align:right;">
88,011
</td>
<td style="text-align:right;">
115
</td>
<td style="text-align:right;">
12,990,181
</td>
<td style="text-align:right;">
3,667
</td>
<td style="text-align:right;">
1.80
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
Queens
</td>
<td style="text-align:right;">
162,987
</td>
<td style="text-align:right;">
186
</td>
<td style="text-align:right;">
19,191,509
</td>
<td style="text-align:right;">
1,228
</td>
<td style="text-align:right;">
1.48
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
Staten Island
</td>
<td style="text-align:right;">
24,494
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
2,668,922
</td>
<td style="text-align:right;">
345
</td>
<td style="text-align:right;">
1.23
</td>
<td style="text-align:right;">
17
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>## Plotly: traffic volume and AED sites by borough (scaled for visibility)
borough_summary_long = borough_summary |&gt;
  select(borough, total_volume, n_facilities) |&gt;
  pivot_longer(
    cols      = c(total_volume, n_facilities),
    names_to  = &quot;metric&quot;,
    values_to = &quot;value&quot;
  ) |&gt;
  mutate(
    metric = recode(
      metric,
      total_volume = &quot;Total traffic volume (2019â€“2024)&quot;,
      n_facilities = &quot;Number of AED-equipped sites&quot;
    )
  )

# Scale each metric to 0â€“1 so both are visible
borough_summary_long_scaled = borough_summary_long |&gt;
  group_by(metric) |&gt;
  mutate(value_scaled = value / max(value, na.rm = TRUE)) |&gt;
  ungroup()

plot_ly(
  data  = borough_summary_long_scaled,
  x     = ~borough,
  y     = ~value_scaled,
  color = ~metric,
  colors = c(&quot;forestgreen&quot;, &quot;lightcoral&quot;),  # green + purple
  type  = &quot;bar&quot;,
  text  = ~paste0(
    metric, &quot;&lt;br&gt;&quot;,
    &quot;Borough: &quot;, borough, &quot;&lt;br&gt;&quot;,
    &quot;Raw value: &quot;, scales::comma(value)
  ),
  hoverinfo = &quot;text&quot;
) |&gt;
  layout(
    barmode = &quot;group&quot;,
    title   = &quot;Relative traffic volume and AED sites by borough&quot;,
    xaxis   = list(title = &quot;Borough&quot;),
    yaxis   = list(title = &quot;Relative value (scaled 0â€“1)&quot;)
  )</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-d17900a775a224173f87" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-d17900a775a224173f87">{"x":{"visdat":{"6be0166f64b2":["function () ","plotlyVisDat"]},"cur_data":"6be0166f64b2","attrs":{"6be0166f64b2":{"x":{},"y":{},"text":{},"hoverinfo":"text","color":{},"colors":["forestgreen","lightcoral"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"barmode":"group","title":"Relative traffic volume and AED sites by borough","xaxis":{"domain":[0,1],"automargin":true,"title":"Borough","type":"category","categoryorder":"array","categoryarray":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Relative value (scaled 0â€“1)"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"y":[0.26943005181347152,0.38478320152713391,1,0.33487864739569129,0.094082356149440965],"text":["Number of AED-equipped sites<br>Borough: Bronx<br>Raw value: 988","Number of AED-equipped sites<br>Borough: Brooklyn<br>Raw value: 1,411","Number of AED-equipped sites<br>Borough: Manhattan<br>Raw value: 3,667","Number of AED-equipped sites<br>Borough: Queens<br>Raw value: 1,228","Number of AED-equipped sites<br>Borough: Staten Island<br>Raw value: 345"],"hoverinfo":["text","text","text","text","text"],"type":"bar","name":"Number of AED-equipped sites","marker":{"color":"rgba(34,139,34,1)","line":{"color":"rgba(34,139,34,1)"}},"textfont":{"color":"rgba(34,139,34,1)"},"error_y":{"color":"rgba(34,139,34,1)"},"error_x":{"color":"rgba(34,139,34,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"y":[0.2834984315852111,1,0.65909653179003047,0.97373985949211617,0.13541591405216846],"text":["Total traffic volume (2019â€“2024)<br>Borough: Bronx<br>Raw value: 5,587,491","Total traffic volume (2019â€“2024)<br>Borough: Brooklyn<br>Raw value: 19,709,072","Total traffic volume (2019â€“2024)<br>Borough: Manhattan<br>Raw value: 12,990,181","Total traffic volume (2019â€“2024)<br>Borough: Queens<br>Raw value: 19,191,509","Total traffic volume (2019â€“2024)<br>Borough: Staten Island<br>Raw value: 2,668,922"],"hoverinfo":["text","text","text","text","text"],"type":"bar","name":"Total traffic volume (2019â€“2024)","marker":{"color":"rgba(240,128,128,1)","line":{"color":"rgba(240,128,128,1)"}},"textfont":{"color":"rgba(240,128,128,1)"},"error_y":{"color":"rgba(240,128,128,1)"},"error_x":{"color":"rgba(240,128,128,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>When we compare all data sources together, a consistent pattern
appears. Cardiovascular disease is the leading cause of death in NYC,
yet AED access and trained responders are not evenly distributed.
Manhattan has the strongest AED coverage but also the highest traffic
congestion, while boroughs with lower trafficâ€”such as Staten Islandâ€”have
fewer AED resources. These findings highlight the need to examine how
AED availability and traffic conditions interact to meet population
needs.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
